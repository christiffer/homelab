# Task Schema Definition
# This schema defines the structure for all tasks in the home lab infrastructure project

schema:
  version: "1.0"

  task:
    id:
      type: string
      format: "prefix-nnn"  # hw-001, sw-001, etc.
      required: true
      description: "Unique task identifier"

    title:
      type: string
      required: true
      max_length: 100
      description: "Brief, actionable task title"

    description:
      type: string
      required: false
      description: "Detailed explanation of what needs to be done"

    type:
      type: enum
      values:
        - software   # Code/config work (Claude can execute)
        - hardware   # Physical work (human must perform)
        - hybrid     # Both software and hardware components
      required: true

    assignee:
      type: enum
      values:
        - claude     # AI assistant handles
        - human      # Human performs
      required: true

    status:
      type: enum
      values:
        - backlog      # Not yet started
        - in-progress  # Actively being worked on
        - blocked      # Waiting on dependency or external factor
        - done         # Completed
      required: true
      default: backlog

    priority:
      type: enum
      values:
        - critical  # Blocks everything, immediate attention
        - high      # Important, should be done soon
        - medium    # Normal priority
        - low       # Nice to have, do when time permits
      required: true
      default: medium

    depends_on:
      type: array
      items: string  # Task IDs
      required: false
      description: "Tasks that must complete before this one can start"

    blocks:
      type: array
      items: string  # Task IDs
      required: false
      description: "Tasks that are waiting on this one"

    labels:
      type: array
      items: string
      required: false
      description: "Tags for filtering and organization"

    created:
      type: datetime
      format: "YYYY-MM-DD"
      required: true

    updated:
      type: datetime
      format: "YYYY-MM-DD"
      required: false

    notes:
      type: array
      items: string
      required: false
      description: "Progress updates and comments"

# Label conventions
labels:
  # Component labels
  - nixos
  - ansible
  - k3s
  - argocd
  - kubernetes

  # Hardware labels
  - pi
  - x86
  - nuc
  - networking

  # Phase labels
  - phase-0-foundation
  - phase-1-control-plane
  - phase-2-workers
  - phase-3-gitops
  - phase-4-core-services
  - phase-5-apps

  # Type labels
  - os-install
  - configuration
  - deployment
  - documentation
